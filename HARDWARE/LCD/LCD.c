#include "lcd.h"
#include "delay.h"

#define Bank1_SRAM2_ADDR ((u32)(0x6c000000))


union
{
	unsigned int word;
    struct 
    {
	 	unsigned char low;
		unsigned char high;
    }byte;
}value; 

unsigned char   num[][16];
unsigned char  biaozi[];
unsigned char hz2[][72];
unsigned char hz1[][32];
unsigned char tc;
unsigned char ts_x,ts_y; 
char dispbuffer[150];
unsigned char xx[12];


void  gpio_config(u8 type)
{
	GPIO_InitTypeDef GPIO_InitStruct;
	GPIO_InitStruct.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_1 | GPIO_Pin_2 | 
 	GPIO_Pin_3 | GPIO_Pin_4 | GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7;		//配置成输出io输出口
	GPIO_InitStruct.GPIO_Speed = GPIO_Speed_50MHz;								         

	if (type != 0)
	{
		GPIO_InitStruct.GPIO_Mode = GPIO_Mode_Out_OD; //推挽输出	
	}
	else
	{
		GPIO_InitStruct.GPIO_Mode = GPIO_Mode_IPU ;
	}
	GPIO_Init (GPIOB, &GPIO_InitStruct);
} 

void LCD_Init(void)
{
	
    EXTI_InitTypeDef EXTI_InitStructure;
	
 	NVIC_InitTypeDef NVIC_InitStructure;

  	RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO,ENABLE);	//使能复用功能时钟
	
  	GPIO_EXTILineConfig(GPIO_PortSourceGPIOB,GPIO_PinSource12);
	
  	EXTI_InitStructure.EXTI_Line=EXTI_Line12;																																																		  
  	EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;	
  	EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;
  	EXTI_InitStructure.EXTI_LineCmd = ENABLE;
  	EXTI_Init(&EXTI_InitStructure);	 	//根据EXTI_InitStruct中指定的参数初始化外设EXTI寄存器

    NVIC_InitStructure.NVIC_IRQChannel = EXTI15_10_IRQn;	
			
  	NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0x02;	
  	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0x01;					
  	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
								
  	NVIC_Init(&NVIC_InitStructure);

	#if 1
    GPIO_INIT();
	#endif
}


void FSMC_Init(void)
{
 #if 0
	FSMC_NORSRAMInitTypeDef  FSMC_NORSRAMInitStructure;
	FSMC_NORSRAMTimingInitTypeDef  readWriteTiming;
	GPIO_InitTypeDef  GPIO_InitStructure;

 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC|RCC_APB2Periph_GPIOD|RCC_APB2Periph_GPIOE|RCC_APB2Periph_GPIOF|RCC_APB2Periph_GPIOG,ENABLE);
  	RCC_AHBPeriphClockCmd(RCC_AHBPeriph_FSMC,ENABLE);
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO,ENABLE);	//使能复用功能时钟
	
	GPIO_InitStructure.GPIO_Pin = 0xc733; 			 	//PORTD复用推挽输出 
 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; 		 //复用推挽输出
 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 	GPIO_Init(GPIOD, &GPIO_InitStructure);

	GPIO_InitStructure.GPIO_Pin = 0xFF80;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; 		 //复用推挽输出
 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 	//PORTE复用推挽输出 
 	GPIO_Init(GPIOE, &GPIO_InitStructure);

	GPIO_InitStructure.GPIO_Pin = 0xF03F;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; 		 //复用推挽输出
 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  			 	//PORTF复用推挽输出 
 	GPIO_Init(GPIOF, &GPIO_InitStructure);

	GPIO_InitStructure.GPIO_Pin = 0x003F;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; 		 //复用推挽输出
 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 	//PORTG复用推挽输出 
 	GPIO_Init(GPIOG, &GPIO_InitStructure);
  
	readWriteTiming.FSMC_AddressSetupTime = 0x03;	 //地址建立时间（ADDSET）为1个HCLK 1/36M=27ns
    readWriteTiming.FSMC_AddressHoldTime = 0x00;	 //地址保持时间（ADDHLD）模式A未用到	
    readWriteTiming.FSMC_DataSetupTime = 0x06;		 //数据保持时间（DATAST）为3个HCLK 4/72M=55ns(对EM的SRAM芯片)	 
    readWriteTiming.FSMC_BusTurnAroundDuration = 0x00;
    readWriteTiming.FSMC_CLKDivision = 0x00;
    readWriteTiming.FSMC_DataLatency = 0x00;
    readWriteTiming.FSMC_AccessMode = FSMC_AccessMode_A;	 //模式A

    FSMC_NORSRAMInitStructure.FSMC_Bank = FSMC_Bank1_NORSRAM4;//  这里我们使用NE4 ，也就对应BTCR[6],[7]。
	FSMC_NORSRAMInitStructure.FSMC_DataAddressMux = FSMC_DataAddressMux_Disable; 
    FSMC_NORSRAMInitStructure.FSMC_MemoryType =FSMC_MemoryType_SRAM;// FSMC_MemoryType_SRAM;  //SRAM   
    FSMC_NORSRAMInitStructure.FSMC_MemoryDataWidth = FSMC_MemoryDataWidth_16b;//存储器数据宽度为16bit  
    FSMC_NORSRAMInitStructure.FSMC_BurstAccessMode =FSMC_BurstAccessMode_Disable;// FSMC_BurstAccessMode_Disable; 
    FSMC_NORSRAMInitStructure.FSMC_WaitSignalPolarity = FSMC_WaitSignalPolarity_Low;
	FSMC_NORSRAMInitStructure.FSMC_AsynchronousWait=FSMC_AsynchronousWait_Disable;
    FSMC_NORSRAMInitStructure.FSMC_WrapMode = FSMC_WrapMode_Disable;   
    FSMC_NORSRAMInitStructure.FSMC_WaitSignalActive = FSMC_WaitSignalActive_BeforeWaitState;  
    FSMC_NORSRAMInitStructure.FSMC_WriteOperation = FSMC_WriteOperation_Enable;	//存储器写使能 
    FSMC_NORSRAMInitStructure.FSMC_WaitSignal = FSMC_WaitSignal_Disable;  
    FSMC_NORSRAMInitStructure.FSMC_ExtendedMode = FSMC_ExtendedMode_Disable; // 读写使用相同的时序
    FSMC_NORSRAMInitStructure.FSMC_WriteBurst = FSMC_WriteBurst_Disable;  
    FSMC_NORSRAMInitStructure.FSMC_ReadWriteTimingStruct = &readWriteTiming;
    FSMC_NORSRAMInitStructure.FSMC_WriteTimingStruct = &readWriteTiming; //读写同样时序
    FSMC_NORSRAMInit(&FSMC_NORSRAMInitStructure);  //初始化FSMC配置
   	FSMC_NORSRAMCmd(FSMC_Bank1_NORSRAM4, ENABLE);  // 使能BANK4
	#endif
}
 

#if 1
void GPIO_INIT(void)
{
	GPIO_InitTypeDef  GPIO_InitStructure;
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC|RCC_APB2Periph_GPIOB|RCC_APB2Periph_GPIOE|RCC_APB2Periph_GPIOF|RCC_APB2Periph_GPIOD,ENABLE);
	GPIO_InitStructure.GPIO_Pin = 0x1200;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPD;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 
 	GPIO_Init(GPIOB, &GPIO_InitStructure);
	
	GPIO_InitStructure.GPIO_Pin = 0x01e0;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 
 	GPIO_Init(GPIOC, &GPIO_InitStructure);

	GPIO_InitStructure.GPIO_Pin = 0x000D;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 
 	GPIO_Init(GPIOE, &GPIO_InitStructure);
	GPIO_SetBits(GPIOC,GPIO_Pin_5);
	GPIO_SetBits(GPIOE,GPIO_Pin_2);
	GPIO_ResetBits(GPIOE,GPIO_Pin_0);
	GPIO_ResetBits(GPIOE,GPIO_Pin_2);
	GPIO_ResetBits(GPIOC,GPIO_Pin_6);
	
	GPIO_InitStructure.GPIO_Pin = 0xF000;               //定义粗调正反转，细调正反转
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 
 	GPIO_Init(GPIOG, &GPIO_InitStructure);
	GPIO_ResetBits(GPIOG,GPIO_Pin_15);
	GPIO_ResetBits(GPIOG,GPIO_Pin_12);
	
	GPIO_InitStructure.GPIO_Pin = 0x1800;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 
 	GPIO_Init(GPIOC, &GPIO_InitStructure);
	GPIO_ResetBits(GPIOC,GPIO_Pin_11);
	GPIO_ResetBits(GPIOC,GPIO_Pin_12);
	
	GPIO_InitStructure.GPIO_Pin = 0x4000;               //电机反馈最大信号
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPD;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 
 	GPIO_Init(GPIOG, &GPIO_InitStructure);

    GPIO_InitStructure.GPIO_Pin = 0x0200;               //电机反馈最小信号
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPD;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;  			 
 	GPIO_Init(GPIOC, &GPIO_InitStructure);

   GPIO_InitStructure.GPIO_Pin = 0x0020;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; 			 
 	GPIO_Init(GPIOB, &GPIO_InitStructure);
	GPIO_ResetBits(GPIOB,GPIO_Pin_5);

}
#endif



void EXTI15_10_IRQHandler(void)
{
	if(ts_x==0xff&&ts_y==0xff)
	{

	ts_x=WRChar(0x98);
	delay(200);
	ts_y=WRChar(0xd8);
	delay(100);

	if(ts_x>0xb0&&ts_x<0xF0&&ts_y>0x00&&ts_y<0x42)tc=~tc;
	}
	EXTI_ClearITPendingBit(EXTI_Line12);  //清除LINE2上的中断标志位  
}



void Initialize(void)
{
        unsigned int i;

        LcdCommand(0x0040);       /* ---------LCD SYSTEM SET系统设置令,8个参数-----
--- */
        LcdDataWrite(0x0030);  //0x30 如果要用内部字符集，必须设成30,而且只能显示在第一屏
        LcdDataWrite(0x0087);
        LcdDataWrite(0x0007);
        LcdDataWrite(39);       /* 显示域长度为320dot */
        LcdDataWrite(0x005c);     /* 确定液晶工作频率 */
        LcdDataWrite(0x00f0);      /* 显示屏高度为240dot */
        LcdDataWrite(40);       /* 显示屏一行所占显示缓冲区字节数(L) */
        LcdDataWrite(0);        /* 显示屏一行所占显示缓冲区字节数(H) */
        delay(100);
//00H,00H,0EFH,80H,25H,0EFH,00H,4BH,00H,00H
        LcdCommand(0x0044);       /* ---------LCD SCROLL显示区设置命令,最多10个参
数--------- */
        LcdDataWrite(0x0000);     /* 显示1区对应的显示RAM起始高8位地址 */
        LcdDataWrite(0x0000);     /* 显示1区对应的显示RAM起始低8位地址 */
        LcdDataWrite(0x00ef);      /* 显示1区占用240个dot行 */
        LcdDataWrite(0x0080);     /* 显示2区对应的显示RAM起始低8位地址 */
        LcdDataWrite(0x0025);     /* 显示2区对应的显示RAM起始高8位地址 */
        LcdDataWrite(0x00ef);      /* 显示3区占用240个dot行 */
        LcdDataWrite(0x0000);     /* 显示3区对应的显示RAM起始低8位地址 */
        LcdDataWrite(0x004b);     /* 显示3区对应的显示RAM起始高8位地址 */
        LcdDataWrite(0x0000);
        LcdDataWrite(0x0000);
        delay(100);

        LcdCommand(0x5a);       /* 水平卷动,初始化时必须清零 */
        LcdDataWrite(0x00);
        delay(100);

        LcdCommand(0x5b);       /* 各个显示区的合成方式,1个参数 */
        LcdDataWrite(0x1d);     /* 参数:显示方式为三屏图形叠加,逻辑或 */
        delay(100);

        LcdCommand(0x59);       /* 打开显示,1个参数 */
        LcdDataWrite(0x54);     /* 只显示第一个区并关闪烁 */
        delay(100);

        LcdCommand(0x4c);       /* 光标自动向右增一?*/
        delay(100);

        LcdCommand(0x46);       /* 设定光标位置命令 */
        LcdDataWrite(0);        /* 从0000位置开始 */
        LcdDataWrite(0);
        delay(100);

        LcdCommand(0x42);       /* 允许MPU连续地把显示数据写入显示区内命令 */

        for(i=0;i<32760;i++)
        {
                LcdDataWrite(0);  /* 将32K显缓全部清零，即LCD不显示任何东西 */
        }
}

void screen1(void )
{

    clear1();
    clear2();
    clear3();

	frame();
  
	dis_biao();
 	#if 1  
   hzdisp1(8,60,hz2[0],1);
   hzdisp1(11,60,hz2[1],1);
   hzdisp1(14,60,hz2[2],1);
   hzdisp1(17,60,hz2[3],1);
   hzdisp1(20,60,hz2[4],1);
   hzdisp1(23,60,hz2[5],1);
   hzdisp1(26,60,hz2[6],1);
   hzdisp1(29,60,hz2[7],1);												 

   hzdisp(12,190,hz1[0],1);
   hzdisp(14,190,hz1[1],1);
   hzdisp(16,190,hz1[2],1);
   hzdisp(18,190,hz1[3],1);

   chdisp(20,190,":     0574-87577658",1);
   chdisp(12,205,"Sunrise Instruments CO.,LTD.",1);
#endif
}
#if 1
void screen2(void )
{
    clear1();
    clear2();
    clear3();
	dis_frame();
  chdisp(8,10,"A",1);
	hzdisp1(10,5,hz2[3],1);
	hzdisp1(14,5,hz2[4],1);
    hzdisp1(18,5,hz2[5],1);
	hzdisp1(22,5,hz2[6],1);
	hzdisp1(26,5,hz2[8],1);

	hzdisp(1,44,hz1[4],1);
	hzdisp(3,44,hz1[5],1);
	chdisp(5,44,"1 :",1);
	hzdisp(1,78,hz1[4],1);
	hzdisp(3,78,hz1[5],1);
	chdisp(5,78,"2 :",1);
	hzdisp(1,112,hz1[4],1);
	hzdisp(3,112,hz1[5],1);
	chdisp(5,112,"3 :",1);
	hzdisp(1,146,hz1[4],1);
	hzdisp(3,146,hz1[5],1);
	chdisp(5,146,"4 :",1);
	hzdisp(1,180,hz1[4],1);
	hzdisp(3,180,hz1[5],1);
	chdisp(5,180,"5 :",1);
	hzdisp(1,214,hz1[4],1);
	hzdisp(3,214,hz1[5],1);
	chdisp(5,214,"6 :",1);

	hzdisp(21,44,hz1[4],1);
	hzdisp(23,44,hz1[5],1);
	chdisp(25,44,"7 :",1);
	hzdisp(21,78,hz1[4],1);
	hzdisp(23,78,hz1[5],1);
	chdisp(25,78,"8 :",1);
	hzdisp(21,112,hz1[4],1);
	hzdisp(23,112,hz1[5],1);
	chdisp(25,112,"9 :",1);
	hzdisp(21,146,hz1[4],1);
	hzdisp(23,146,hz1[5],1);
	chdisp(25,146,"10:",1);
	hzdisp(21,180,hz1[4],1);
	hzdisp(23,180,hz1[5],1);
	chdisp(25,180,"11:",1);
	hzdisp(21,214,hz1[4],1);
	hzdisp(23,214,hz1[5],1);
	chdisp(25,214,"12:",1);
    
	chdisp(18,44,"V",1);
	chdisp(38,44,"V",1);
	chdisp(18,78,"V",1);
	chdisp(38,78,"V",1);
	chdisp(18,112,"V",1);
	chdisp(38,112,"V",1);
	chdisp(18,146,"V",1);
	chdisp(38,146,"V",1);
	chdisp(18,180,"V",1);
	chdisp(38,180,"V",1);
	chdisp(18,214,"V",1);
	chdisp(38,214,"V",1);




   
}
void hzdisp1(unsigned char x,unsigned char y,unsigned char *p,unsigned char z)	 //X<40,y<240
     {
        unsigned char i;
        switch(z)
          {case 1:
                value.word=y*40+x+0x0000;//一屏

                break;
           case 2:
                value.word=y*40+x+0x2580;//二屏
                break;
           case 3:
                value.word=y*40+x+0x4b00;//三屏

                break;

          }

        SetCursor(value.byte.high,value.byte.low);
        i=0;
        do
        {
                LcdDataWrite(p[i]);
                i=i+3;
        }
        while(i<69);
        value.word++;
        SetCursor(value.byte.high,value.byte.low);
        i=1;
        while(i<70)
        {
                LcdDataWrite(p[i]);
                i=i+3;
        }
        value.word++;
        SetCursor(value.byte.high,value.byte.low);

        i=2;
        while(i<71)
        {
                LcdDataWrite(p[i]);
                i=i+3;
        }

     }
void hzdisp(unsigned char x,unsigned char y,unsigned char *p,unsigned char z)
     {
        unsigned char i;
        switch(z)
          {case 1:
                value.word=y*40+x+0x0000;

                break;
           case 2:
                value.word=y*40+x+0x2580;
                break;
           case 3:
                value.word=y*40+x+0x4b00;

                break;

          }

        SetCursor(value.byte.high,value.byte.low);
        i=0;
        do
        {
                LcdDataWrite(p[i]);
                i=i+2;
        }
        while(i<0x1e);
        value.word++;
        SetCursor(value.byte.high,value.byte.low);
        i=1;
        while(i<0x1f)
        {
                LcdDataWrite(p[i]);
                i=i+2;
        }
     }
#endif
void frame(void)			//显示大框
{
	unsigned char i,j;
	LcdCommand(0x46);	
	LcdDataWrite(0x80);	 
	LcdDataWrite(0x25);	  //9600
	for(j=0;j<=1;j++)
	{
		if(j)
		{
			LcdCommand(0x46);	
			LcdDataWrite(0xb0);	//19120
			LcdDataWrite(0x4a);
		}
		LcdCommand(0x4c);//right	
		LcdCommand(0x42);   
		for(i=0;i<=79;i++)
			LcdDataWrite(0xff);	 

	}
	LcdCommand(0x46);		
	LcdDataWrite(0xd0);	 //9680
	LcdDataWrite(0x25);
	LcdCommand(0x4f);   //down
	LcdCommand(0x42);	
	for(i=0;i<=235;i++)
		LcdDataWrite(0xc0);		 
	LcdCommand(0x46);		  
	LcdDataWrite(0xf7);	//9719
	LcdDataWrite(0x25);
	LcdCommand(0x42);
			  
	for(i=0;i<=235;i++)
		LcdDataWrite(0x03);		
}

void dis_frame(void)
{
  	unsigned char i,j,d;
	LcdCommand(0x46);	
	LcdDataWrite(0x80);	 
	LcdDataWrite(0x25);	  //9600
	for(j=0;j<8;j++)
	{
		if(j==1)
		{
			LcdCommand(0x46);	
			LcdDataWrite(0xd0);	//10960
			LcdDataWrite(0x2a);
		}
	    else if(j==2)
		{
			LcdCommand(0x46);	
			LcdDataWrite(0x20);	//12320
			LcdDataWrite(0x30);
		}
		 else if(j==3)
		{
			LcdCommand(0x46);	
			LcdDataWrite(0x70);	//13680
			LcdDataWrite(0x35);
		}
		 else if(j==4)
		{
			LcdCommand(0x46);	
			LcdDataWrite(0xc0);	//15040
			LcdDataWrite(0x3a);
		}
		 else if(j==5)
		{
			LcdCommand(0x46);	
			LcdDataWrite(0x10);	//16400
			LcdDataWrite(0x40);
		}
		 else if(j==6)
		{
			LcdCommand(0x46);	
			LcdDataWrite(0x60);	//17760
			LcdDataWrite(0x45);
		}
		 else if(j==7) 
		{
			LcdCommand(0x46);	
			LcdDataWrite(0xb0);	//19120
			LcdDataWrite(0x4a);
		}
		LcdCommand(0x4c);//right	
		LcdCommand(0x42);   
		for(i=0;i<=79;i++)
			LcdDataWrite(0xff);	 

	}
	for(d=0;d<7;d++){
	value.word=9680+1360*d;
	LcdCommand(0x46);		
	LcdDataWrite(value.byte.low);	 
	LcdDataWrite(value.byte.high);
	LcdCommand(0x4f);   
	LcdCommand(0x42);	
	for(i=0;i<32;i++)
		LcdDataWrite(0xc0);
		}
	for(d=0;d<7;d++){
	value.word=9719+1360*d;
	LcdCommand(0x46);		
	LcdDataWrite(value.byte.low);	 
	LcdDataWrite(value.byte.high);
	LcdCommand(0x4f);   
	LcdCommand(0x42);	
	for(i=0;i<32;i++)
		LcdDataWrite(0x03);
		}
	for(d=0;d<6;d++){
	value.word=11049+1360*d;
	LcdCommand(0x46);		
	LcdDataWrite(value.byte.low);	 
	LcdDataWrite(value.byte.high);
	LcdCommand(0x4f);   
	LcdCommand(0x42);	
	for(i=0;i<32;i++)
		LcdDataWrite(0x03);
		}
	for(d=0;d<6;d++)
	{
		value.word=11059+1360*d;
		LcdCommand(0x46);		
		LcdDataWrite(value.byte.low);	 
		LcdDataWrite(value.byte.high);
		LcdCommand(0x4f);   
		LcdCommand(0x42);	
		for(i=0;i<32;i++)
			LcdDataWrite(0x03);
	}

	for(d=0;d<6;d++)
	{
		value.word=11069+1360*d;
		LcdCommand(0x46);		
		LcdDataWrite(value.byte.low);	
		LcdDataWrite(value.byte.high);
		LcdCommand(0x4f);   
		LcdCommand(0x42);	
		for(i=0;i<32;i++)
			LcdDataWrite(0x03);
	}
}

void chdisp(unsigned char x,unsigned char y,unsigned char *p,unsigned char z)
  {

        unsigned char i,j,uLen,c1,*p1;
        unsigned int k;

         switch(z)
         {
		   case 1:
                value.word=y*40+x+0x0000;//一屏	   1和2 或

                break;
           case 2:
                value.word=y*40+x+0x2580;//二屏	   1和3	异或
                break;
           case 3:
                value.word=y*40+x+0x4b00;//三屏	   2和3 异或

                break;

          }

        uLen=0;
        while ( (unsigned char)p[uLen] >= 0x10 ){uLen++;};	   //退格的ASCLL码
        i=0;
        while(i<uLen)						//把*p指向的内容一个个都写出来
        {
			c1=*(p+i);
			if (c1 >= 0x10)	
			{
	            k=c1-0x20;
	            p1=&num[k][16];  
		    }
			value.word++;						// 列数加1
			i++;
	 	}
  }

#if 1
void SetCursor(unsigned char CursorHIGH,unsigned char CursorLOW)
{
        delay(100);
        LcdCommand(0x4f);		 //向下
		delay(100);
        LcdCommand(0x46);
		delay(100);
        LcdDataWrite(CursorLOW);
		delay(100);
        LcdDataWrite(CursorHIGH);
        delay(100);
        LcdCommand(0x42);
}

  void  clear1(void)
  {
  		unsigned int x;
		delay(100);
        LcdCommand(0x4c);
		delay(100);
        LcdCommand(0x46);

        LcdDataWrite(0);
        LcdDataWrite(0);
		delay(100);
        LcdCommand(0x42);
        for(x=0;x<0x2580;x++)
          {
          LcdDataWrite(0);
          }


  }
 void clear2(void)
  {    
  		unsigned int x;
 		delay(100);
        LcdCommand(0x4c);
		delay(100);
        LcdCommand(0x46);

        LcdDataWrite(0x80);
        LcdDataWrite(0x25);
		delay(100);
        LcdCommand(0x42);
        for(x=0;x<0x2580;x++)
          {
          LcdDataWrite(0);
          }


  }
void clear3(void)
  {
        unsigned int x;
		delay(100);
        LcdCommand(0x4c);
		delay(100);
        LcdCommand(0x46);

        LcdDataWrite(0x00);
        LcdDataWrite(0x4b);
		delay(100);
        LcdCommand(0x42);
        for(x=0;x<0x2580;x++)
          {
          LcdDataWrite(0);
          }
  }

void p_h(void)
{
unsigned char i,j;
for(j=0;j<38;j++)
{
WriteCommand( 0x4f );
delay(100);
WriteCommand( 0x46 ); // 设置光标地址
delay(100);
LcdDataWrite(value.byte.low);
delay(100);
LcdDataWrite(value.byte.high);
delay(100);
LcdCommand(0x42);
delay(100);
for(i=0;i<2;i++)
WriteData(0xff);
value.word+=256;
}
}
void p_h_1(void)
{
unsigned char i,j;
for(j=0;j<38;j++)
{
WriteCommand( 0x4F );
delay(100);
WriteCommand( 0x46 ); // 设置光标地址
delay(100);
LcdDataWrite(value.byte.low);
delay(100);
LcdDataWrite(value.byte.high);
delay(100);
LcdCommand(0x42);
delay(100);
//for(i=0;i<6;i++)
//WriteData(0x00);
for(i=0;i<2;i++)
WriteData(0xff);

value.word+=256;
}
}
void p_s(unsigned char j)
{unsigned char i;
delay(100);
WriteCommand( 0x4f );	 //往下
delay(100);
WriteCommand( 0x46 ); // 设置光标地址
delay(100);
LcdDataWrite(value.byte.low);
delay(100);
LcdDataWrite(value.byte.high);
delay(100);
LcdCommand(0x42);
delay(100);
WriteData(0xc0);
for(i=4;i<236;i++)
{
  if(j==0)
  {
  	WriteData(0xc0);
  }
  else
  {
    WriteData(0x06);
  }

 }
}
void WriteCommand( unsigned char CommandByte ) 
{
LcdCommand(CommandByte);
}
void WriteData( unsigned dataW )
 {
LcdDataWrite (dataW);
}
#endif

void LcdCommand(unsigned char num_1)
{
#ifndef USE_FSMC
  delay(200);
 *(vu16*)(Bank1_SRAM2_ADDR+0x0020)=num_1;
#else


#endif
}

void LcdDataWrite(unsigned char num_2)
{
#ifndef USE_FSMC
	delay(200);
    *(vu16*)(Bank1_SRAM2_ADDR+0x0000)= num_2;
#else

#endif	
}


void dis_biao(void)
 {
  	unsigned char count2,count3;
    unsigned char faucs;
    faucs=0x22;
   	for(count3=0;count3<9;count3++)
     {
     LcdCommand(0x4f);	//设置方向下
     LcdCommand(0x46);	   //设置光标
     LcdDataWrite(faucs);  //180*40+2
     LcdDataWrite(0x1c); //240/8=30
     LcdCommand(0x42);   //连续写入
     LcdDataWrite(0);
     LcdDataWrite(0);
     for(count2=0;count2<40;count2++)
     {
	   LcdDataWrite(biaozi[count3*40+count2]);
     }
     faucs++;
     }
 }
#if 1
  unsigned char  biaozi[]={
  0x03,0x0C,0x10,0x20,0x40,0x40,0x81,0x81,0x81,0x80,0x80,0x80,0x81,0x81,0x81,0x81,
  0x80,0x80,0x80,0xFF,0xFF,0xFF,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xF8,0xFF,0x7F,0x7F,0x3F,0x1F,0x0F,0x03,0xFF,0x00,0x00,0x00,0x00,0xFC,0x04,0x04,
  0x04,0xE0,0x18,0x04,0x04,0x04,0x88,0x70,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x03,0xFF,
  0xFF,0xFF,0xFF,0x07,0xFF,0xFF,0xFF,0xFF,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC6,0x42,0x42,0x42,0x42,0x42,0x7F,0x00,
  0x00,0x00,0x00,0xFF,0xFE,0xFE,0xFD,0xFD,0xFB,0xF0,0xFE,0xFD,0xFB,0xF8,0xFF,0xFC,
  0xF3,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x37,0x18,0x10,0x10,0x10,0x10,0x39,0x00,0x00,0x00,0x00,0xFF,0xEF,0xEB,0xEF,0xDF,
  0x40,0x1B,0x5A,0xC1,0xDB,0xD8,0x83,0x5B,0xC0,0xDF,0xDF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x8D,0x86,0x84,0x84,0x84,0x84,0xCE,0x00,
  0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFB,0xFC,0xFD,0xFD,0xFC,0xFD,0xFC,0xFD,0xFF,
  0x3F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x04,0x00,0x00,
  0xCC,0x44,0x04,0x04,0x04,0x04,0x0E,0x00,0x00,0x00,0x00,0xFF,0xBF,0xBF,0xBF,0xA1,
  0x1B,0xBB,0x83,0x3B,0xBB,0x07,0xBF,0xBF,0xBF,0xC0,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x42,0x22,0x18,0x44,0x42,0x7C,0x00,
  0x00,0x00,0x00,0xFF,0xFF,0xFD,0xFE,0xFF,0xF7,0xF9,0xFE,0xFD,0xFD,0xFD,0xFB,0x7B,
  0x7B,0x7E,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x1E,0x21,0x21,0x3E,0x20,0x21,0x1E,0x00,0x00,0x00,0x00,0xFF,0xFF,0x77,0x07,0x55,
  0x55,0x55,0x55,0x55,0x55,0x35,0xBF,0x4F,0x75,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  0x80,0x60,0x10,0x08,0x04,0x04,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,
  0x02,0x02,0x02,0xFE,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,0x7E,
  0x7E,0x7E,0xFC,0xFC,0xF8,0xF0,0xE0,0x80,
                     };
unsigned char  num[][16]=
{
/*--0  文字:     --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--0  文字:     --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/							 //32位机需增加一组
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*-- 1 文字:  !  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/						   //
0x00,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x18,0x18,0x00,0x00,

/*-- 2 文字:  "  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x12,0x36,0x24,0x48,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*-- 3 文字:  #  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x24,0x24,0x24,0xFE,0x48,0x48,0x48,0xFE,0x48,0x48,0x48,0x00,0x00,

/*--4  文字:  $  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x10,0x38,0x54,0x54,0x50,0x30,0x18,0x14,0x14,0x54,0x54,0x38,0x10,0x10,

/*-- 5 文字:  %  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x44,0xA4,0xA8,0xA8,0xA8,0x54,0x1A,0x2A,0x2A,0x2A,0x44,0x00,0x00,

/*--6  文字:  &  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x30,0x48,0x48,0x48,0x50,0x6E,0xA4,0x94,0x88,0x89,0x76,0x00,0x00,

/*-- 7 文字:  '  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x60,0x60,0x20,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  8文字:  (  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x02,0x04,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x08,0x08,0x04,0x02,0x00,

/*-- 9 文字:  )  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x40,0x20,0x10,0x10,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x10,0x20,0x40,0x00,

/*-- 10 文字:  *  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x10,0x10,0xD6,0x38,0x38,0xD6,0x10,0x10,0x00,0x00,0x00,0x00,

/*--11  文字:  +  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x10,0xFE,0x10,0x10,0x10,0x10,0x00,0x00,0x00,

/*-- 12 文字:  ,  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x20,0xC0,

/*-- 13 文字:  -  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*-- 14 文字:  .  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x00,0x00,

/*--15  文字:  /  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x01,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x00,

/*-- 16 文字:  0  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00,

/*--17  文字:  1  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x10,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

/*--18  文字:  2  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x04,0x04,0x08,0x10,0x20,0x42,0x7E,0x00,0x00,

/*--19  文字:  3  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3C,0x42,0x42,0x04,0x18,0x04,0x02,0x02,0x42,0x44,0x38,0x00,0x00,

/*--20  文字:  4  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x04,0x0C,0x14,0x24,0x24,0x44,0x44,0x7E,0x04,0x04,0x1E,0x00,0x00,

/*-- 21 文字:  5  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x7E,0x40,0x40,0x40,0x58,0x64,0x02,0x02,0x42,0x44,0x38,0x00,0x00,

/*-- 22 文字:  6  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x1C,0x24,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x24,0x18,0x00,0x00,

/*-- 23 文字:  7  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x7E,0x44,0x44,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,

/*-- 24 文字:  8  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x42,0x3C,0x00,0x00,

/*--25  文字:  9  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x26,0x1A,0x02,0x02,0x24,0x38,0x00,0x00,

/*-- 26 文字:  :  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,

/*-- 27 文字:  ;  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x20,

/*--28  文字:  <  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x02,0x04,0x08,0x10,0x20,0x40,0x20,0x10,0x08,0x04,0x02,0x00,0x00,

/*-- 29 文字:  =  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,

/*--30  文字:  >  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x40,0x20,0x10,0x08,0x04,0x02,0x04,0x08,0x10,0x20,0x40,0x00,0x00,

/*-- 31 文字:  ?  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3C,0x42,0x42,0x62,0x02,0x04,0x08,0x08,0x00,0x18,0x18,0x00,0x00,

/*-- 32 文字:  @  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x38,0x44,0x5A,0xAA,0xAA,0xAA,0xAA,0xB4,0x42,0x44,0x38,0x00,0x00,

/*-- 33 文字:  A  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x10,0x10,0x18,0x28,0x28,0x24,0x3C,0x44,0x42,0x42,0xE7,0x00,0x00,

/*-- 34 文字:  B  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xF8,0x44,0x44,0x44,0x78,0x44,0x42,0x42,0x42,0x44,0xF8,0x00,0x00,

/*--35  文字:  C  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3E,0x42,0x42,0x80,0x80,0x80,0x80,0x80,0x42,0x44,0x38,0x00,0x00,

/*-- 36 文字:  D  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xF8,0x44,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x44,0xF8,0x00,0x00,

/*-- 37 文字:  E  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xFC,0x42,0x48,0x48,0x78,0x48,0x48,0x40,0x42,0x42,0xFC,0x00,0x00,

/*-- 38 文字:  F  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xFC,0x42,0x48,0x48,0x78,0x48,0x48,0x40,0x40,0x40,0xE0,0x00,0x00,

/*-- 39 文字:  G  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3C,0x44,0x44,0x80,0x80,0x80,0x8E,0x84,0x44,0x44,0x38,0x00,0x00,

/*--40  文字:  H  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xE7,0x42,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x42,0xE7,0x00,0x00,

/*-- 41 文字:  I  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x7C,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

/*-- 42 文字:  J  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x88,0xF0,

/*-- 43 文字:  K  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xEE,0x44,0x48,0x50,0x70,0x50,0x48,0x48,0x44,0x44,0xEE,0x00,0x00,

/*-- 44 文字:  L  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xE0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x42,0xFE,0x00,0x00,

/*--  45文字:  M  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xEE,0x6C,0x6C,0x6C,0x6C,0x54,0x54,0x54,0x54,0x54,0xD6,0x00,0x00,

/*-- 46 文字:  N  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xC7,0x62,0x62,0x52,0x52,0x4A,0x4A,0x4A,0x46,0x46,0xE2,0x00,0x00,

/*-- 47 文字:  O  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00,

/*-- 48 文字:  P  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xFC,0x42,0x42,0x42,0x42,0x7C,0x40,0x40,0x40,0x40,0xE0,0x00,0x00,

/*-- 49 文字:  Q  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0xB2,0xCA,0x4C,0x38,0x06,0x00,

/*-- 50 文字:  R  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xFC,0x42,0x42,0x42,0x7C,0x48,0x48,0x44,0x44,0x42,0xE3,0x00,0x00,

/*-- 51 文字:  S  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x3E,0x42,0x42,0x40,0x20,0x18,0x04,0x02,0x42,0x42,0x7C,0x00,0x00,

/*-- 52 文字:  T  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xFE,0x92,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,

/*-- 53 文字:  U  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xE7,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,

/*-- 54 文字:  V  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xE7,0x42,0x42,0x44,0x24,0x24,0x28,0x28,0x18,0x10,0x10,0x00,0x00,

/*--55  文字:  W  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xD6,0x92,0x92,0x92,0x92,0xAA,0xAA,0x6C,0x44,0x44,0x44,0x00,0x00,

/*-- 56 文字:  X  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x18,0x18,0x18,0x24,0x24,0x42,0xE7,0x00,0x00,

/*-- 57 文字:  Y  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xEE,0x44,0x44,0x28,0x28,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,

/*--58  文字:  Z  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x7E,0x84,0x04,0x08,0x08,0x10,0x20,0x20,0x42,0x42,0xFC,0x00,0x00,

/*--59 文字:  [  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x1E,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1E,0x00,

/*--60  文字:  \  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x40,0x40,0x20,0x20,0x10,0x10,0x10,0x08,0x08,0x04,0x04,0x04,0x02,0x02,

/*--61  文字:  ]  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x78,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x78,0x00,

/*-- 62 文字:  ^  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x1C,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--63  文字:  _  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,

/*-- 64 文字:  `  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x60,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--65  文字:  a  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x1E,0x22,0x42,0x42,0x3F,0x00,0x00,

/*--66  文字:  b  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x64,0x58,0x00,0x00,

/*-- 67 文字:  c  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x22,0x40,0x40,0x40,0x22,0x1C,0x00,0x00,

/*-- 68 文字:  d  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x06,0x02,0x02,0x02,0x1E,0x22,0x42,0x42,0x42,0x26,0x1B,0x00,0x00,

/*--69  文字:  e  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x7E,0x40,0x40,0x42,0x3C,0x00,0x00,

/*-- 70 文字:  f  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x0F,0x11,0x10,0x10,0x7E,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

/*-- 71 文字:  g  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x44,0x44,0x38,0x40,0x3C,0x42,0x42,0x3C,

/*-- 72 文字:  h  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x5C,0x62,0x42,0x42,0x42,0x42,0xE7,0x00,0x00,

/*--73  文字:  i  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x70,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

/*--74  文字:  j  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x1C,0x04,0x04,0x04,0x04,0x04,0x04,0x44,0x78,

/*-- 75 文字:  k  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x4E,0x48,0x50,0x68,0x48,0x44,0xEE,0x00,0x00,

/*-- 76 文字:  l  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

/*--77  文字:  m  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x49,0x49,0x49,0x49,0x49,0xED,0x00,0x00,

/*--78  文字:  n  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xDC,0x62,0x42,0x42,0x42,0x42,0xE7,0x00,0x00,

/*--79  文字:  o  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,

/*-- 80 文字:  p  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD8,0x64,0x42,0x42,0x42,0x44,0x78,0x40,0xE0,

/*--81  文字:  q  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1E,0x22,0x42,0x42,0x42,0x22,0x1E,0x02,0x07,

/*--82  文字:  r  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xEE,0x32,0x20,0x20,0x20,0x20,0xF8,0x00,0x00,

/*--83  文字:  s  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x42,0x40,0x3C,0x02,0x42,0x7C,0x00,0x00,

/*--84  文字:  t  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x7C,0x10,0x10,0x10,0x10,0x10,0x0C,0x00,0x00,

/*-- 85 文字:  u  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC6,0x42,0x42,0x42,0x42,0x46,0x3B,0x00,0x00,

/*-- 86 文字:  v  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x28,0x10,0x10,0x00,0x00,

/*-- 87 文字:  w  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD7,0x92,0x92,0xAA,0xAA,0x44,0x44,0x00,0x00,

/*--88  文字:  x  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x6E,0x24,0x18,0x18,0x18,0x24,0x76,0x00,0x00,

/*--89  文字:  y  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x28,0x18,0x10,0x10,0xE0,

/*--90  文字:  z  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x44,0x08,0x10,0x10,0x22,0x7E,0x00,0x00,

/*--91  文字:  {  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x03,0x04,0x04,0x04,0x04,0x04,0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x03,0x00,

/*--92  文字:  |  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,

/*--93  文字:  }  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x60,0x10,0x10,0x10,0x10,0x10,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x60,0x00,

/*--94  文字:  ~  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x30,0x4C,0x43,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--95  文字:  .  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x00,0x00,

/*--96  文字:     --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=8x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,


};

unsigned char hz2[][72]={
/*--  文字:  多  0--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x00,0x30,0x00,0x00,0x60,0x30,0x00,0xDF,0xF0,
0x03,0x40,0x60,0x04,0x21,0x80,0x18,0x33,0x00,0x00,0x06,0x00,0x00,0x18,0x00,0x00,0xEC,0x00,
0x07,0x18,0x00,0x38,0x30,0x18,0x00,0x6F,0xF8,0x00,0xC0,0x30,0x03,0x20,0x60,0x0C,0x30,0xC0,
0x00,0x11,0x80,0x00,0x26,0x00,0x00,0x18,0x00,0x00,0xE0,0x00,0x1F,0x00,0x00,0x00,0x00,0x00,
/*--  文字:  通  1--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x18,0x3F,0xF0,0x0C,0x0C,0xC0,0x0C,0x07,0x00,
0x00,0x03,0x08,0x00,0x7F,0xF8,0x00,0x42,0x08,0x04,0x42,0x08,0x3C,0x7F,0xF8,0x04,0x42,0x08,
0x04,0x42,0x08,0x04,0x42,0x08,0x04,0x7F,0xF8,0x04,0x42,0x08,0x04,0x42,0x08,0x04,0x42,0x08,
0x0C,0x42,0x38,0x33,0x00,0x10,0x60,0xC0,0x02,0x20,0x3F,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,
/*--  文字:  道  2--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x60,0x0C,0x18,0x40,0x0C,0x08,0x80,0x04,0x10,0x8C,
0x00,0xEF,0x70,0x00,0x02,0x00,0x04,0x24,0x30,0x7E,0x3B,0xF0,0x04,0x20,0x30,0x04,0x20,0x30,
0x04,0x3F,0xF0,0x04,0x20,0x30,0x04,0x20,0x30,0x04,0x3F,0xF0,0x04,0x20,0x30,0x04,0x20,0x30,
0x1A,0x3F,0xF0,0x31,0x40,0x00,0x20,0xC0,0x00,0x00,0x3F,0xFC,0x00,0x00,0x78,0x00,0x00,0x00,

/*--  文字:  耐  3--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x30,0x00,0x08,0x30,0x3F,0xF0,0x30,0x02,0x00,0x30,
0x02,0x00,0x30,0x02,0x00,0x36,0x3F,0xFF,0xF8,0x36,0x98,0x30,0x36,0x98,0x30,0x36,0x9A,0x30,
0x36,0x99,0x30,0x36,0x99,0xB0,0x36,0x99,0xB0,0x36,0x98,0xB0,0x36,0x98,0x30,0x36,0x98,0x30,
0x36,0x98,0x30,0x36,0x98,0x30,0x30,0x18,0x30,0x30,0x30,0xF0,0x20,0x00,0x60,0x00,0x00,0x00,

/*--  文字:  压  4--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x0F,0xFF,0xFC,0x0C,0x00,0x00,0x0C,0x0C,0x00,
0x0C,0x0C,0x00,0x0C,0x0C,0x00,0x0C,0x0C,0x00,0x0C,0x0C,0x00,0x0C,0x0C,0x00,0x0D,0xFF,0xF0,
0x0C,0x0C,0x00,0x0C,0x0C,0x00,0x08,0x0C,0x80,0x08,0x0C,0x40,0x08,0x0C,0x60,0x08,0x0C,0x30,
0x10,0x0C,0x20,0x10,0x0C,0x00,0x20,0x0C,0x0C,0x27,0xF3,0xF0,0x40,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  测  5--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x11,0x00,0x0C,0x09,0xFE,0x08,0x0D,0x86,0x08,0x05,0x86,0x48,
0x01,0xA6,0x48,0x41,0xB6,0x48,0x33,0xB6,0x48,0x13,0xB6,0x48,0x15,0xB6,0x48,0x05,0xB6,0x48,
0x05,0xB6,0x48,0x05,0xB6,0x48,0x09,0xA6,0x48,0x09,0xA6,0x48,0x39,0xA4,0x48,0x18,0x20,0x48,
0x18,0x58,0x08,0x18,0x44,0x08,0x18,0x86,0x08,0x19,0x02,0x38,0x06,0x00,0x18,0x00,0x00,0x00,

/*--  文字:  试  6--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xA0,0x10,0x01,0xD8,0x08,0x00,0x88,0x0C,0x00,0x88,
0x04,0x00,0x84,0x00,0xFF,0xFE,0x00,0x00,0x80,0x00,0x00,0x80,0x04,0x00,0x80,0x3C,0x02,0x80,
0x04,0x7D,0xC0,0x04,0x08,0xC0,0x04,0x08,0x40,0x04,0x08,0x40,0x04,0x48,0x60,0x04,0x88,0x22,
0x05,0x0F,0x34,0x07,0x38,0x14,0x06,0xE0,0x1C,0x04,0x00,0x0E,0x00,0x00,0x06,0x00,0x00,0x00,

/*--  文字:  仪  7--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x88,0x00,0x03,0x04,0x00,0x02,0x06,0x00,0x06,0x03,0x00,
0x04,0x02,0x30,0x04,0x00,0x30,0x0C,0x20,0x20,0x0C,0x20,0x60,0x14,0x10,0x40,0x14,0x10,0x40,
0x24,0x08,0x80,0x44,0x08,0x80,0x04,0x05,0x00,0x04,0x07,0x00,0x04,0x03,0x00,0x04,0x07,0x00,
0x04,0x0C,0xC0,0x04,0x18,0xE0,0x04,0x30,0x78,0x04,0x40,0x1E,0x05,0x80,0x08,0x00,0x00,0x00,

/*--  文字:  中  8--*/
/*--  宋体18;  此字体下对应的点阵为：宽x高=24x24   --*/
0x00,0x00,0x00,0x00,0x18,0x00,0x00,0x10,0x00,0x00,0x10,0x00,0x00,0x10,0x00,0x10,0x10,0x18,
0x1F,0xFF,0xF8,0x18,0x10,0x18,0x18,0x10,0x18,0x18,0x10,0x18,0x18,0x10,0x18,0x18,0x10,0x18,
0x18,0x10,0x18,0x1F,0xFF,0xF8,0x10,0x10,0x10,0x00,0x10,0x00,0x00,0x10,0x00,0x00,0x10,0x00,
0x00,0x10,0x00,0x00,0x18,0x00,0x00,0x18,0x00,0x00,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
unsigned char hz1[][32]={
//联//
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x88,0xFC,0x48,0x48,0x50,0x48,0x00,0x79,0xFC,0x48,0x20,
0x48,0x20,0x78,0x20,0x4B,0xFE,0x48,0x20,0x4C,0x50,0x78,0x50,
0xC8,0x88,0x08,0x88,0x09,0x04,0x0A,0x02,

//系//
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0xF8,0x3F,0x00,0x04,0x00,0x08,0x20,0x10,0x40,0x3F,0x80,
0x01,0x00,0x06,0x10,0x18,0x08,0x7F,0xFC,0x01,0x04,0x09,0x20,
0x11,0x10,0x21,0x08,0x45,0x04,0x02,0x00,

//热//
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x40,0x10,0x40,0x10,0x40,0xFD,0xF8,0x10,0x48,0x10,0x48,
0x1C,0xC8,0x30,0x48,0xD0,0xAA,0x10,0xAA,0x51,0x06,0x22,0x02,
0x00,0x00,0x48,0x88,0x44,0x44,0x84,0x44,

//线//
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x50,0x10,0x48,0x20,0x40,0x24,0x5C,0x45,0xE0,0xF8,0x40,
0x10,0x5E,0x23,0xE0,0x40,0x44,0xFC,0x48,0x40,0x30,0x00,0x22,
0x1C,0x52,0xE0,0x8A,0x43,0x06,0x00,0x02,

//通//
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x47,0xF8,0x20,0x10,0x21,0xA0,0x00,0x40,0x07,0xFC,0xE4,0x44,
0x24,0x44,0x27,0xFC,0x24,0x44,0x24,0x44,0x27,0xFC,0x24,0x44,
0x24,0x54,0x54,0x08,0x8F,0xFE,0x00,0x00,

//道//
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x02,0x08,0x21,0x10,0x10,0x00,0x17,0xFC,0x00,0x80,0x03,0xF8,
0xF2,0x08,0x13,0xF8,0x12,0x08,0x13,0xF8,0x12,0x08,0x13,0xF8,
0x12,0x08,0x28,0x00,0x47,0xFE,0x00,0x00,


};
#endif 


unsigned char WRChar(unsigned char num) //SPI写数据
{
	 unsigned char i,kj;
	 
	DCLK=0;	 	 //启动SPI
	DIN=0;
	delay(100);
	 CS=0;
	delay(100);
	for(i=0;i<8;i++)
	{	
		kj=num;
		kj=kj<<i;
		kj=kj>>7;
		DCLK=0;
		if(kj)
			DIN=1;
		else
			DIN=0;
		delay(300);//上升沿有效
		DCLK=1;
		delay(300);
	}
	#if 1
	DCLK=0;delay(300);
	DCLK=1;delay(300);
	DCLK=0;delay(300);

	num=0x00;
	for(i=0;i<8;i++)
	{
		DCLK=1;
		delay(150); //下降沿有效
		if(DOUT) num++;
		num<<=1;
		delay(50);
		DCLK=0;
		delay(150);
	}
//	for(i=0;i<4;i++)
//{   DCLK=1; delay(50);
//    DCLK=0; delay(50);
//}
	delay(100);
#endif
	CS=1;
	return(num);
}

#if 0
void clear_lcd_touchflag(void)
{
 if(!(ts_x==0xff&&ts_y==0xff))
  	{
  	 while(int1==0);
	 ts_x=0xff;ts_y=0xff;
	 if(tc)
	 	{chdisp(1,2,"touch",1);
		 chdisp(1,16,"is ok",1);
		}
	 else { 
	     chdisp(1,2,"     ",1);
		 chdisp(1,16,"     ",1);
	 }
     }
}

void SED1335_INIT(void)
{
	unsigned char h;
    delay(50000); 
	ts_x=0xff;ts_y=0xff;
 	LCD_Init();		  		//初始化与LED连接的硬件接口
	Initialize();
	for(h=0;h<10;h++)
	delay(50000);
	screen1();
	for(h=0;h<200;h++)
	delay_ms(10);
	screen2();
}
void num_disp(void)
{
	unsigned char u,f;
sprintf(dispbuffer,"%f\n",ny[12]);
		for(u=0;u<6;u++)
    		xx[u]=(unsigned char)dispbuffer[u] ;
		xx[6]=0;
    	chdisp(2,10,xx,1);
		delay(20);
	for(f=0;f<6;f++)
	{
		sprintf(dispbuffer,"%f\n",ny[f]);
		for(u=0;u<6;u++)
    		xx[u]=(unsigned char)dispbuffer[u] ;
		xx[6]=0;
    	chdisp(11,44+34*f,xx,1);
		delay(20);
		}

	for(f=6;f<12;f++)
	{
		sprintf(dispbuffer,"%f\n",ny[f]);
		for(u=0;u<6;u++)
    		xx[u]=(unsigned char)dispbuffer[u] ;
		xx[6]=0;
    	chdisp(31,44+34*(f-6),xx,1);
		delay(20);
		}
}
 #endif

 
